sap.ui.define(["sap/ui/core/mvc/ControllerExtension","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,r){"use strict";return e.extend("depthiringapp.ext.controller.List_dept",{override:{onInit:function(){var e=this.base.getExtensionAPI().getModel()},routing:{onBeforeBinding:async function(){debugger;var e;var t;var r,i,n;debugger;if(sap.ushell&&sap.ushell.Container){t=sap.ushell.Container.getService("UserInfo");e=t.getEmail()}else{console.log("not got ")}var s=this.base.getExtensionAPI().getModel();if(!s){console.error("Model is not available.");return}var o;if(typeof s.getServiceUrl==="function"){o=s.getServiceUrl();console.log("Service URL:",o)}else{console.error("Unable to determine the service URL.");return}debugger;this.base.getView().getContent()[0].mAggregations.content.mAggregations.content.setFilterConditions({$editState:[{operator:"DRAFT_EDIT_STATE",values:["ALL_HIDING_DRAFTS","All (Hiding Drafts)"],validated:"Validated"}]});try{const n=await new Promise((e,t)=>{jQuery.ajax({url:o+"/Authority",method:"GET",dataType:"json",success:function(t){e(t)},error:function(e,r,i){t(new Error(r+": "+i))}})});console.log("Fetched the Authority data",n);const s=n.value;debugger;debugger;for(let t of s){if(t.user==="Admin"){r=t.email;console.log(r)}debugger;if(t.email===e){i=t.user}}debugger;if(sap.ushell&&sap.ushell.Container){var t=sap.ushell.Container.getService("UserInfo");var e=t.getEmail();debugger;if(e!==r){debugger;this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){debugger;if(e.getId().includes("Create")||e.getId().includes("Delete")){e.setVisible(false)}});debugger;this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")&&(e.getId().includes("Draft")||e.getId().includes("Save"))}).forEach(function(e){e.setVisible(false)});debugger;this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Input")&&e.getId().includes("Draft")}).forEach(function(e){e.setEditable(false);e.setEnabled(false)});debugger;this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Select")&&e.getId().includes("EditingStatus")}).forEach(function(e){e.setSelectedKey("All (Hiding Draft)");e.setEnabled(false)});debugger}}else{console.error("UserInfo service not available.")}}catch(e){console.error("Error fetching Authority data",e)}}}}})});
//# sourceMappingURL=List_dept.controller.js.map